<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template">
    <meta name="author" content="GeeksLabs">
    <meta name="keyword" content="Creative, Dashboard, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal">
    <link rel="shortcut icon" href="/static/img/favicon.png">

    <title>电影大数据——年代特征</title>

	 <!-- 引入 echarts.js -->
    <script src="/static/js/echarts.js"></script>
    <script src="/static/js/world.js"></script>
      <script src="/static/jquery.js"></script>
    <!-- Bootstrap CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- bootstrap theme -->
    <link href="/static/css/bootstrap-theme.css" rel="stylesheet">
    <!--external css-->
    <!-- font icon -->
    <link href="/static/css/elegant-icons-style.css" rel="stylesheet" />
    <link href="/static/css/font-awesome.min.css" rel="stylesheet" />
    <!-- Custom styles -->
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/style-responsive.css" rel="stylesheet" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
    <!--[if lt IE 9]>
      <script src="/static/js/html5shiv.js"></script>
      <script src="/static/js/respond.min.js"></script>
      <script src="/static/js/lte-ie7.js"></script>
    <![endif]-->
  </head>

  <body>
  <!-- container section start -->
  <section id="container" class="">
      <!--header start-->
         <header class="header dark-bg">
      <div class="toggle-nav">
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
      </div>
      <!--logo start-->
      <a href="index.html" class="logo">电影大数据</a>
      <!--logo end-->
      <div class="nav search-row" id="top_menu">
        <!--  search form start -->
        <ul class="nav top-menu">
          <li>
            <form class="navbar-form">
</form>
          </li>
          <strong><img src="img/icon.png" width="30" height="30" alt=""/></strong>
        </ul>
        <!--  search form end -->
      </div>
      <div class="top-nav notification-row">
        <!-- notificatoin dropdown start-->        <!-- notificatoin dropdown end-->
      </div>
    </header>
    <!--header end-->

      <!--sidebar start-->
      <aside>
        <div id="sidebar"  class="nav-collapse ">
          <!-- sidebar menu start-->
          <ul class="sidebar-menu">
            <li class="active"> <a class="" href="/"> <i><img src="/static/img/电影推荐.png" width="25" height="25" alt=""/></i> <span>电影推荐</span> </a> </li>
            <li class="sub-menu"> <a href="javascript:;" class=""> <i><img src="/static/img/电影地区.png" width="25" height="25" alt=""/></i> <span>电影地区</span> <span class="menu-arrow arrow_carrot-right"></span></a>
              <ul class="sub">
                <li> <a class="" href="地区特征"> <i><img src="/static/img/地区特征.png" width="25" height="25" alt=""/></i> <span>地区特征</span></a></li>
                <li> <a class="" href="电影统计"> <i><img src="/static/img/电影统计.png" width="25" height="25" alt=""/></i> <span>电影统计</span></a></li>
              </ul>
            </li>
            <li class="sub-menu"> <a href="javascript:;" class=""> <i><img src="/static/img/电影时间.png" width="25" height="25" alt=""/></i> <span>电影时间</span> <span class="menu-arrow arrow_carrot-right"></span></a>
              <ul class="sub">
                <li> <a class="" href="电影年代"> <i><img src="/static/img/电影年代.png" width="25" height="25" alt=""/></i> <span>电影年代</span></a></li>
                <li> <a class="" href="年代特征"> <i><img src="/static/img/年代特征.png" width="25" height="25" alt=""/></i> <span>年代特征</span></a></li>
              </ul>
            </li>
            <li class="sub-menu"> <a href="javascript:;" class=""> <i><img src="/static/img/电影人物.png" width="25" height="25" alt=""/></i> <span>电影人物</span> <span class="menu-arrow arrow_carrot-right"></span></a>
              <ul class="sub">
                <li> <a class="" href="演员热度"> <i><img src="/static/img/演员热度.png" width="25" height="25" alt=""/></i> <span>演员热度</span></a></li>
                <li> <a class="" href="吸金导演"> <i><img src="/static/img/吸金导演.png" width="25" height="25" alt=""/></i> <span>吸金导演</span></a></li>
              </ul>
            </li>
            <li> <a class="" href="电影类型"> <i><img src="/static/img/电影类型.png" width="25" height="25" alt=""/></i> <span>电影类型</span></a></li>
          </ul>
          <!-- sidebar menu end-->
        </div>
      </aside>
      <!--sidebar end-->
      <!--main content start-->
      <section id="main-content">
        <div class="row">
          <section>此处为新 div 标签的内容</section>
          <p> 此</p>
          <p>内</p>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <h3 class="page-header"><i><img src="img/年代特征.png" width="25" height="25" alt=""/></i> 年代特征</h3>
</div>
          <div>
			  <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
        	  <div id="main" style="width: 1200px;height:600px;"></div>
        	  <script type="text/javascript">
        	  // 基于准备好的dom，初始化echarts实例
        	  var myChart = echarts.init(document.getElementById('main'));
        	  // 指定图表的配置项和数据
              var value = [];
               $.ajax({
            url: "/handle_year_feature",
            type: "GET",
            data: {test: $("#textLine").val()},
            dataType: "json",
                   async: false,
            success: function (jsonStr) {
                if (jsonStr) {
                    for (var i = 0; i < jsonStr.length; i++) {
                        value[i] = jsonStr[i].value;    //挨个取出类别并填入类别数组
                    }
                }

            }
        });
			  var option = {
    title: {
        text: '近年好片坏片数量',
		left:'10'
    },
    tooltip : {
        trigger: 'axis',
        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
        }
    },
	toolbox: {
        show: true,
        orient: 'vertical',
        left: 'right',
        top: 'center',
        feature: {
            mark: {show: true},
            dataView: {show: true, readOnly: false},
            magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
            restore: {show: true},
            saveAsImage: {show: true}
        }
    },
    legend: {
        data:['坏片', '好片', '总计']
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    xAxis : [
        {
            type : 'value'
        }
    ],
    yAxis : [
        {
            type : 'category',
            axisTick : {show: false},
            data : ['2013','2014','2015','2016','2017','2018','2019']
        }
    ],
    series : [
        {
            name:'总计',
            type:'bar',
            top:'30%',
            z:3,
            label: {
                normal: {
                    show: true,
                    position: 'inside'
                }
            },
            data:[value[0]+value[7], value[1]+value[8], value[2]+value[9], value[3]+value[10], value[4]+value[11],
                value[5]+value[12], value[6]+value[13]]
        },
        {
            name:'好片',
            type:'bar',
            top:'30%',
            stack: '总量',
            label: {
                normal: {
                    show: true
                }
            },
            data:[value[0], value[1], value[2], value[3], value[4], value[5], value[6]]
        },
        {
            name:'坏片',
            type:'bar',
            top:'30%',
            stack: '总量',
            label: {
                normal: {
                    show: true,
                    position: 'left'
                }
            },
            data:[-value[7], -value[8], -value[9], -value[10], -value[11], -value[12], -value[13]]
        }
    ]
};


		// 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
      </script>

		  </div>
        </div>
</section>
      <!--main content end-->
  </section>
  <!-- container section end -->
    <!-- javascripts -->
    <script src="/static/js/jquery.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- nicescroll -->
    <script src="/static/js/jquery.scrollTo.min.js"></script>
    <script src="/static/js/jquery.nicescroll.js" type="text/javascript"></script>
    <!--custome script for all page-->
    <script src="/static/js/scripts.js"></script>


  </body>
</html>
